import MainLayout from '~/components/layouts/main'
import Figure from '~/components/Figure'

export const meta = {
  title: 'Введение'
}

export default ({ children }) => <MainLayout meta={meta}>{children}</MainLayout>

# Введение

Программные системы состоят из модулей. Мы можем условно поделить эти модули на низкоуровневые и высокоуровневые.

_Низкоуровневые_ содержат утилитарную функциональность. _Высокоуровневые_ содержат сложную, более абстрактную бизнес-логику.

В более устойчивых системах высокоуровневые модули, как правило, переиспользуемы и не требуют обновления при изменении низкоуровневых.

## Принцип инверсии зависимостей

[Принцип инверсии зависимостей](https://ru.wikipedia.org/wiki/Принцип_инверсии_зависимостей) (Dependency Inversion Principle, DIP) помогает обеспечить подобное отношение между модулями. Он предполагает, что:
- Высокороувневые модули не должны зависеть от низкоуровневых; оба типа должны зависеть от абстракций.
- Абстракции не должны зависеть от деталей, детали должны зависеть от абстракций.

DIP помогает снизить [сцепление модулей](https://ru.wikipedia.org/wiki/Зацепление_(программирование)) (coupling).

Когда модули сильно сцеплены, они сильно зависят друг от друга. В этом случае одни модули знают слишком много о других, из-за чего изменения в одном будут вызывать изменения в других — что нарушает [OCP](/ocp).

## Сцепление и связность

_Сцепление_ (coupling) не стоит путать со _связностью_ (cohesion).

[Сцепление](https://ru.wikipedia.org/wiki/Зацепление_(программирование)) — степень взаимозависимости разных модулей. Чем выше связанность, тем более хрупкая система, и тем сложнее вносить изменения.

[Связность](https://ru.wikipedia.org/wiki/Связность_(программирование)) — степень, в которой задачи, выполняемые некоторым программным модулем, связаны друг с другом. Чем ниже связность, тем строже модули следуют [SRP](/srp), тем выше сфокусирован модуль на конкретной задаче.

## Абстракции

Согласно принципу модули не должны зависеть не от других модулей напрямую, а от абстракций.

В [примере c регулятором температуры](http://stg-tud.github.io/sedc/Lecture/ws13-14/3.5-DIP.html#mode=document) в первом случае структура системы нарушает DIP. Модули зависят напрямую от других модулей, это увеличивает сцепление.

<Figure>
  <img src='/static/dip-violation.svg' />
  <figcaption>Модули зависят от конкретных модулей, это увеличивает сцепление</figcaption>
</Figure>

Исправленный вариант вводит прослойку между сущностями в виде абстракций — интерфейсов.

Модулям теперь не обязательно работать с конкретно указанными модулями, они могут работать с любой сущностью, которая реализует указанный интерфейс. Так снижается сцепление.

<Figure>
  <img src='/static/dip-compliance.svg' />
  <figcaption>Абстракции в виде интерфейсов позволяют снизить сцепление</figcaption>
</Figure>

## DIP и тестируемость

При тестировании модуля, который зависит от других модулей, нам нужно либо инстанциировать экземпляр каждой зависимости, либо создать заглушки.

 DIP упрощает тестирование системы. Так как согласно принципу модули зависят от интерфейсов, нам достаточно создать заглушку, реализующую этот интерфейс.

## Материалы к разделу
- [Принцип инверсии зависимостей, Википедия](https://ru.wikipedia.org/wiki/Принцип_инверсии_зависимостей)
- [Принцип инверсии зависимостей, Александр Бындю](https://blog.byndyu.ru/2009/12/blog-post.html)
- [Принцип инверсии зависимостей, MakeDev](https://makedev.org/principles/solid/dip.html)
- [Сцепление модулей](https://ru.wikipedia.org/wiki/Зацепление_(программирование))
- [Связность модулей](https://ru.wikipedia.org/wiki/Связность_(программирование))
- [GRASP](https://ru.wikipedia.org/wiki/GRASP)
- [Inversion of Control Containers and the Dependency Injection pattern](https://martinfowler.com/articles/injection.html)
- [Пример с терморегулятором](http://stg-tud.github.io/sedc/Lecture/ws13-14/3.5-DIP.html#mode=document)

## Вопросы
WIP

*[GRASP]:General Responsibility Assignment Software Patterns
*[DIP]:Dependency Inversion Principle
*[OCP]:Open-Closed Principle
*[SRP]:Single Responsibility Principle
